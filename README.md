# Домашнее задание к занятию "`Резервное копирование баз данных`" - `Скакун Михаил`


### Инструкция по выполнению домашнего задания

   1. Сделайте `fork` данного репозитория к себе в Github и переименуйте его по названию или номеру занятия, например, https://github.com/имя-вашего-репозитория/git-hw или  https://github.com/имя-вашего-репозитория/7-1-ansible-hw).
   2. Выполните клонирование данного репозитория к себе на ПК с помощью команды `git clone`.
   3. Выполните домашнее задание и заполните у себя локально этот файл README.md:
      - впишите вверху название занятия и вашу фамилию и имя
      - в каждом задании добавьте решение в требуемом виде (текст/код/скриншоты/ссылка)
      - для корректного добавления скриншотов воспользуйтесь [инструкцией "Как вставить скриншот в шаблон с решением](https://github.com/netology-code/sys-pattern-homework/blob/main/screen-instruction.md)
      - при оформлении используйте возможности языка разметки md (коротко об этом можно посмотреть в [инструкции  по MarkDown](https://github.com/netology-code/sys-pattern-homework/blob/main/md-instruction.md))
   4. После завершения работы над домашним заданием сделайте коммит (`git commit -m "comment"`) и отправьте его на Github (`git push origin`);
   5. Для проверки домашнего задания преподавателем в личном кабинете прикрепите и отправьте ссылку на решение в виде md-файла в вашем Github.
   6. Любые вопросы по выполнению заданий спрашивайте в чате учебной группы и/или в разделе “Вопросы по заданию” в личном кабинете.
   
Желаем успехов в выполнении домашнего задания!
   
### Дополнительные материалы, которые могут быть полезны для выполнения задания

1. [Руководство по оформлению Markdown файлов](https://gist.github.com/Jekins/2bf2d0638163f1294637#Code)

---

### Задание 1

1.1. Восстановление данных в полном объеме за предыдущий день:

Подходящий вариант: Полное резервное копирование (Full Backup) ежедневно + инкрементное резервное копирование (Incremental backup) каждый час.
Полное резервное копирование: Создаёт полную копию всех данных базы данных. Выполняется ежедневно, например, в ночное время, когда нагрузка на систему минимальна. Это позволяет быстро восстановить состояние базы данных на момент создания копии.
Инкрементное резервное копирование: Сохраняет только те изменения, которые были внесены с момента последнего полного или инкрементного резервного копирования. Выполняется каждый час. Это позволяет восстановить данные за предыдущий день с детализацией до часа, применяя последовательно инкрементные копии к последнему полному бэкапу.
Особенности: Быстрое восстановление до состояния предыдущего дня. Медленнее, чем дифференциальное, но требует меньше места.
1.2. Восстановление данных за час до предполагаемой поломки:

Подходящий вариант: Дифференциальное резервное копирование (Differential backup) каждые 15 минут + репликация (Replication).
Дифференциальное резервное копирование: Сохраняет все изменения, которые были внесены с момента последнего полного резервного копирования. Выполняется каждые 15 минут (или чаще, в зависимости от требований). Это позволяет восстановить данные за час до поломки, применяя последнюю дифференциальную копию к последнему полному бэкапу.
Репликация: Постоянно синхронизирует данные между основным и резервным серверами (или несколькими резервными серверами). Это обеспечивает высокую доступность данных и возможность быстрого переключения на резервный сервер в случае поломки основного.
Особенности: Быстрое восстановление до состояния за последние несколько часов. Занимает больше места, чем инкрементное, но быстрее в восстановлении.
1.3. Моментальное переключение на работающую или починенную базу данных:

Подходящий вариант: Высокая доступность (High Availability) с помощью кластеризации и автоматического переключения (Failover).
Кластеризация: Создание кластера баз данных, состоящего из нескольких серверов, которые работают как единая система.
Автоматическое переключение (Failover): В случае поломки одного из серверов в кластере, система автоматически переключается на работающий сервер. Это может быть достигнуто с использованием таких технологий, как Pacemaker, Corosync или встроенных механизмов репликации и отказоустойчивости в СУБД (например, Galera Cluster для MySQL).
Альтернативный вариант: Репликация с задержкой (Delayed Replication). Реплика с задержкой позволяет иметь резервную копию базы данных с небольшой задержкой во времени. В случае логических ошибок или случайного удаления данных на основном сервере, реплика с задержкой позволяет восстановить данные до момента ошибки.
Особенности: Минимальное время простоя, высокая надежность. Требует значительных инвестиций в инфраструктуру и настройку.
Важные соображения:

Тестирование: Регулярно тестируйте процедуры восстановления, чтобы убедиться в их работоспособности.
Хранение резервных копий: Храните резервные копии в безопасном месте, отдельно от основных серверов.
Мониторинг: Внедрите систему мониторинга, чтобы отслеживать состояние баз данных и резервных копий.
RTO и RPO: Определите целевые значения RTO (Recovery Time Objective - время восстановления) и RPO (Recovery Point Objective - допустимая потеря данных) для каждой системы.

1. `Заполните здесь этапы выполнения, если требуется ....`
2. `Заполните здесь этапы выполнения, если требуется ....`
3. `Заполните здесь этапы выполнения, если требуется ....`
4. `Заполните здесь этапы выполнения, если требуется ....`
5. `Заполните здесь этапы выполнения, если требуется ....`
6. 

```
Поле для вставки кода...
....
....
....
....
```

`При необходимости прикрепитe сюда скриншоты
![Название скриншота 1](ссылка на скриншот 1)


---

### Задание 2

Резервное копирование (pg_dump): pg_dump -U postgres -h localhost -p 5432 -Fc mydatabase > mydatabase.dump
Восстановление (pg_restore): pg_restore -U postgres -h localhost -p 5432 -d mydatabase mydatabase.dump
Да, процесс резервного копирования можно автоматизировать с использованием различных инструментов и техник. Вот несколько подходов:

Cron (Linux/Unix-подобные системы): Cron - это планировщик задач, который позволяет автоматически запускать команды или скрипты по расписанию. Вы можете создать cron-задачу, которая будет ежедневно или еженедельно выполнять pg_dump и сохранять резервные копии в указанное место.

Пример cron-задачи (выполняется ежедневно в 3:00 ночи): 0 3 * * *   postgres  pg_dump -U postgres -h localhost -p 5432 -Fc mydatabase > /path/to/backup/mydatabase_$(date +\%Y-\%m-\%d).dump

pg_basebackup: Более продвинутый инструмент для создания физических резервных копий баз данных PostgreSQL. Подходит для создания бэкапов, используемых для настройки потоковой репликации.

1. `Заполните здесь этапы выполнения, если требуется ....`
2. `Заполните здесь этапы выполнения, если требуется ....`
3. `Заполните здесь этапы выполнения, если требуется ....`
4. `Заполните здесь этапы выполнения, если требуется ....`
5. `Заполните здесь этапы выполнения, если требуется ....`
6. 

```
Поле для вставки кода...
....
....
....
....
```

`При необходимости прикрепитe сюда скриншоты
![Название скриншота 2](ссылка на скриншот 2)`


---

### Задание 3

3.1. Пример команды инкрементного резервного копирования MySQL:

MySQL Enterprise Backup (MEB) - является коммерческим инструментом, но предоставляет надежный способ инкрементного резервного копирования.

Полное резервное копирование (как отправная точка):

mysqlbackup --backup-dir=/path/to/backup/full backup-to-image

Инкрементное резервное копирование (после полного):  mysqlbackup --backup-dir=/path/to/backup/incremental1 --incremental-base='history:last' backup-to-image
Последующие инкрементные резервные копирования: mysqlbackup --backup-dir=/path/to/backup/incremental2 --incremental-base='history:last' backup-to-image



3.1. Преимущества репликации по сравнению с обычным резервным копированием:*

Репликация и резервное копирование - это разные, но взаимодополняющие стратегии обеспечения доступности и защиты данных. Репликация не заменяет резервное копирование, но предоставляет дополнительные преимущества:

Высокая доступность (High Availability): Репликация позволяет быстро переключаться на резервный сервер (реплику) в случае поломки основного сервера. Время простоя (downtime) значительно меньше, чем при восстановлении из резервной копии.
Аварийное восстановление (Disaster Recovery): Реплика может находиться в другом географическом месте, что обеспечивает защиту от локальных аварий (пожар, наводнение и т.д.).
Балансировка нагрузки (Read scaling): Реплики могут использоваться для обработки запросов чтения, что снижает нагрузку на основной сервер и повышает производительность.
Оперативная отчётность (Online Reporting): Запросы отчётности могут быть направлены на реплику, не влияя на производительность основного сервера.
Тестирование и разработка (Testing and Development): Реплику можно использовать для тестирования новых версий программного обеспечения или внесения изменений в схему базы данных, не затрагивая рабочий сервер.
Когда репликация имеет преимущество:

Необходимо минимизировать время простоя: Если простой системы даже на несколько минут неприемлем, репликация с автоматическим переключением (failover) будет гораздо более эффективным решением, чем восстановление из резервной копии, которое может занять часы.
Требуется высокая доступность данных: Если данные должны быть доступны 24/7, репликация обеспечивает возможность продолжения работы системы даже при выходе из строя одного из серверов.
Нужна географически распределенная защита данных: Если необходимо защитить данные от локальных аварий, репликация на сервер в другом регионе или центре обработки данных обеспечит необходимую отказоустойчивость.
Необходимо снизить нагрузку на основной сервер: Если основной сервер испытывает высокую нагрузку, репликация для обработки запросов чтения позволит значительно улучшить производительность.
В заключение:

Репликация - это мощный инструмент для обеспечения высокой доступности, масштабируемости и защиты данных. Однако, она не заменяет резервное копирование. Резервное копирование по-прежнему необходимо для защиты от потери данных в результате логических ошибок, повреждения данных, случайного удаления данных или других непредвиденных ситуаций. Репликация и резервное копирование должны использоваться вместе для обеспечения комплексной защиты данных.
1. `Заполните здесь этапы выполнения, если требуется ....`
2. `Заполните здесь этапы выполнения, если требуется ....`
3. `Заполните здесь этапы выполнения, если требуется ....`
4. `Заполните здесь этапы выполнения, если требуется ....`
5. `Заполните здесь этапы выполнения, если требуется ....`
6. 

```
Поле для вставки кода...
....
....
....
....
```

`При необходимости прикрепитe сюда скриншоты
![Название скриншота](ссылка на скриншот)`

### Задание 4

`Приведите ответ в свободной форме........`

1. `Заполните здесь этапы выполнения, если требуется ....`
2. `Заполните здесь этапы выполнения, если требуется ....`
3. `Заполните здесь этапы выполнения, если требуется ....`
4. `Заполните здесь этапы выполнения, если требуется ....`
5. `Заполните здесь этапы выполнения, если требуется ....`
6. 

```
Поле для вставки кода...
....
....
....
....
```

`При необходимости прикрепитe сюда скриншоты
![Название скриншота](ссылка на скриншот)`
